execute if entity @s[y_rotation=-135.1..-45] run summon minecraft:armor_stand ^ ^ ^ {Silent:1b,NoAI:1b,Invulnerable:1b,Invisible:1b,Rotation:[90f,0f],Tags:["exp.mech","exp.new_vehicle","exp.vehicle","exp.moddable_vehicle","smithed.block"],ArmorItems:[{},{},{},{id:"minecraft:jigsaw",count:1,components:{"minecraft:item_model":"expansion:empty"}}],Passengers:[{id:"minecraft:marker",Tags:["exp.movedir"]},{id:"minecraft:marker",Tags:["exp.left_arm_control","exp.mech_arm_controller"]},{id:"minecraft:marker",Tags:["exp.right_arm_control","exp.mech_arm_controller"]},{id:"minecraft:armor_stand",Tags:["exp.mech_seat"],NoAI:1b,Invisible:1b,Silent:1b,Invulnerable:1b,attributes:[{id:scale,base:0.22}]},{id:"minecraft:interaction",Tags:["exp.mech_rcdet","smithed.block"],width:1.5,height:2f,response:0b},{id:snowball,Tags:["exp.mech_targeter"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b}]}
execute if entity @s[y_rotation=45.1..135] run summon minecraft:armor_stand ^ ^ ^ {Silent:1b,NoAI:1b,Invulnerable:1b,Invisible:1b,Rotation:[270f,0f],Tags:["exp.mech","exp.new_vehicle","exp.vehicle","exp.moddable_vehicle","smithed.block"],ArmorItems:[{},{},{},{id:"minecraft:jigsaw",count:1,components:{"minecraft:item_model":"expansion:empty"}}],Passengers:[{id:"minecraft:marker",Tags:["exp.movedir"]},{id:"minecraft:marker",Tags:["exp.left_arm_control","exp.mech_arm_controller"]},{id:"minecraft:marker",Tags:["exp.right_arm_control","exp.mech_arm_controller"]},{id:"minecraft:armor_stand",Tags:["exp.mech_seat"],NoAI:1b,Invisible:1b,Silent:1b,Invulnerable:1b,attributes:[{id:scale,base:0.22}]},{id:"minecraft:interaction",Tags:["exp.mech_rcdet","smithed.block"],width:1.5,height:2f,response:0b},{id:snowball,Tags:["exp.mech_targeter"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b}]}
execute if entity @s[y_rotation=-45..45] run summon minecraft:armor_stand ^ ^ ^ {Silent:1b,NoAI:1b,Invulnerable:1b,Invisible:1b,Rotation:[180f,0f],Tags:["exp.mech","exp.new_vehicle","exp.vehicle","exp.moddable_vehicle","smithed.block"],ArmorItems:[{},{},{},{id:"minecraft:jigsaw",count:1,components:{"minecraft:item_model":"expansion:empty"}}],Passengers:[{id:"minecraft:marker",Tags:["exp.movedir"]},{id:"minecraft:marker",Tags:["exp.left_arm_control","exp.mech_arm_controller"]},{id:"minecraft:marker",Tags:["exp.right_arm_control","exp.mech_arm_controller"]},{id:"minecraft:armor_stand",Tags:["exp.mech_seat"],NoAI:1b,Invisible:1b,Silent:1b,Invulnerable:1b,attributes:[{id:scale,base:0.22}]},{id:"minecraft:interaction",Tags:["exp.mech_rcdet","smithed.block"],width:1.5,height:2f,response:0b},{id:snowball,Tags:["exp.mech_targeter"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b}]}
execute if entity @s[y_rotation=135.1..-135] run summon minecraft:armor_stand ^ ^ ^ {Silent:1b,NoAI:1b,Invulnerable:1b,Invisible:1b,Rotation:[0f,0f],Tags:["exp.mech","exp.new_vehicle","exp.vehicle","exp.moddable_vehicle","smithed.block"],ArmorItems:[{},{},{},{id:"minecraft:jigsaw",count:1,components:{"minecraft:item_model":"expansion:empty"}}],Passengers:[{id:"minecraft:marker",Tags:["exp.movedir"]},{id:"minecraft:marker",Tags:["exp.left_arm_control","exp.mech_arm_controller"]},{id:"minecraft:marker",Tags:["exp.right_arm_control","exp.mech_arm_controller"]},{id:"minecraft:armor_stand",Tags:["exp.mech_seat"],NoAI:1b,Invisible:1b,Silent:1b,Invulnerable:1b,attributes:[{id:scale,base:0.22}]},{id:"minecraft:interaction",Tags:["exp.mech_rcdet","smithed.block"],width:1.5,height:2f,response:0b},{id:snowball,Tags:["exp.mech_targeter"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b},{id:snowball,Tags:["exp.origin_link","exp.mech.bot_link"],NoGravity:1b,Invulnerable:1b}]}

# set data
execute as @e[type=armor_stand,tag=exp.mech,tag=exp.new_vehicle,distance=..0.01,limit=1,sort=nearest] run function expansion:vehicles/mech/summon/set_data